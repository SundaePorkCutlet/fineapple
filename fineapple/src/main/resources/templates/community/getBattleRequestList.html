<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" lang="ko">
<meta charset="utf-8">
<!-- 공통 header -->
<th:block th:replace="layout/fragments/header.html :: header"></th:block>

<!--begin::Body-->
<body id="kt_body" class="aside-enabled">
<!-- 공통 SideBar -->
<th:block th:replace="layout/fragments/sidebar.html :: sidebar"></th:block>
<!-- ////////////////////////////////////여기까지 절대 고정 건드리지마셈//////////////////////////////////// -->
<!-- 얘들아 여기서부터 내가 넣고 싶은 바디 내용을 넣는거야!!!! 헤드는 건드릴거 없음 XXXXXXX -->

<div class="tab-content">
    <!--begin::Tab panel-->
    <div id="kt_billing_months" class="card-body p-0 tab-pane fade show active" role="tabpanel" aria-labelledby="kt_billing_months">
        <!--begin::Table container-->
        <div class="table-responsive">
            <!--begin::Table-->

       
            <!-- <a href="#" class="btn btn-sm btn-light" th:onClick="javascript:fcAddGroupView()">
                
                <span class="svg-icon svg-icon-3">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
									<rect opacity="0.5" x="11.364" y="20.364" width="16" height="2" rx="1" transform="rotate(-90 11.364 20.364)" fill="black"></rect>
									<rect x="4.36396" y="11.364" width="16" height="2" rx="1" fill="black"></rect>
								</svg>
							</span>
                승부생성</a> -->
            


            <!--begin::Follow-->
            <a th:href="@{/community/getBattleList}" class="btn btn-sm btn-light">
                <!--begin::Svg Icon | path: icons/duotune/arrows/arr075.svg-->
                <span class="svg-icon svg-icon-3">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
									<rect opacity="0.5" x="11.364" y="20.364" width="16" height="2" rx="1" transform="rotate(-90 11.364 20.364)" fill="black"></rect>
									<rect x="4.36396" y="11.364" width="16" height="2" rx="1" fill="black"></rect>
								</svg>
							</span>
                <!--end::Svg Icon-->승부 기록</a>
            <!--end::Follow-->


            <!--begin::Follow-->
            <a th:href="@{/community/getBattleRequestList}" class="btn btn-sm btn-light">
                <!--begin::Svg Icon | path: icons/duotune/arrows/arr075.svg-->
                <span class="svg-icon svg-icon-3">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
									<rect opacity="0.5" x="11.364" y="20.364" width="16" height="2" rx="1" transform="rotate(-90 11.364 20.364)" fill="black"></rect>
									<rect x="4.36396" y="11.364" width="16" height="2" rx="1" fill="black"></rect>
								</svg>
							</span>
                <!--end::Svg Icon-->승부 보낸 리스트</a>
            <!--end::Follow-->


            <!--begin::Follow-->
            <a th:href="@{/community/getBattleReceiveList}" class="btn btn-sm btn-light">
                <!--begin::Svg Icon | path: icons/duotune/arrows/arr075.svg-->
                <span class="svg-icon svg-icon-3">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
									<rect opacity="0.5" x="11.364" y="20.364" width="16" height="2" rx="1" transform="rotate(-90 11.364 20.364)" fill="black"></rect>
									<rect x="4.36396" y="11.364" width="16" height="2" rx="1" fill="black"></rect>
								</svg>
							</span>
                <!--end::Svg Icon-->승부 받은 리스트</a>
            <!--end::Follow-->
        </div>
    </div>
</div>

<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
    <!--begin::Container-->
    <div id="kt_content_container" class="container-fluid">
        <div class="d-flex flex-wrap flex-stack mb-6 mt-4">
            <h3 class="fw-bolder my-2">승부 보낸 리스트<span class="fs-6 text-gray-400 fw-bold ms-1"></span></h3>
        </div>

        <div class="row g-6 mb-6 g-xl-9 mb-xl-9">
           <!--  <div class="col-md-6 col-xxl-4" th:each = "data : ${list}"> -->
            <div class="col-md-3 col-xxl-4" th:each = "data, i : ${list}">
            <input type="hidden" th:id="|${i.count}id|" th:value = "#{data.BattleNo}">
                <div class="card">
                    <div class="card-body d-flex flex-center flex-column p-9">
                        <div class="symbol symbol-65px symbol-circle mb-5">
                            <img src="/assets/profile/돼지.png"/>
                        </div>
                        <a href="#" class="fs-4 text-gray-800 text-hover-primary fw-bolder mb-0" th:text = "${data.user.userName}"></a>
                        <div class="fw-bold text-gray-400 mb-6" th:text = "${data.rivalUser.userId}"></div>
                        <div class="d-flex flex-center flex-wrap mb-5">
                            <div class="border border-dashed rounded min-w-125px py-3 px-4 mx-3 mb-3">
                                <div class="fs-6 fw-bolder text-gray-700">칼로리 섭취</div>
                                <div class="fw-bold text-gray-400">승부 유형</div>
                            </div>
                            <div class="border border-dashed rounded min-w-125px py-3 px-4 mx-3 mb-3">
                                <div class="fs-6 fw-bolder text-gray-700"><span class="comma-3"th:text = "${data.battlePeriod}"></span>일</div>
                                <div class="fw-bold text-gray-400">승부 기간</div>
                            </div>
                            <div class="border border-dashed rounded min-w-125px py-3 px-4 mx-3 mb-3">
                                <div class="fs-6 fw-bolder text-gray-700"><span class="comma-3"th:text = "${data.userTrgtKcal}"></span>Kcal</div>
                                <div class="fw-bold text-gray-400">나의 목표 칼로리</div>
                            </div>
                        </div>
                        <div class="d-flex flex-center flex-wrap mb-5">
                            <a href="#" class="btn btn-sm btn-light mx-3 btn-cancel" th:onClick="|javascript:fnDelRequestBattle(${data.battleNo})|">
                                <!--begin::Svg Icon | path: icons/duotune/arrows/arr075.svg-->
                                <span class="svg-icon svg-icon-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="black"/>
                                            <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="black"/>
                                        </svg>
                                    </span>
                                <!--end::Svg Icon-->취소</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--begin::Row(for show more)-->
        <!--        <div class="d-flex flex-center">-->
        <!--            <button class="btn btn-primary" id="kt_followers_show_more_button">-->
        <!--                <span class="indicator-label">더 보기</span>-->
        <!--                <span class="indicator-progress">...-->
        <!--									<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>-->
        <!--            </button>-->
        <!--        </div>-->
    </div>
</div>
<!-- ////////////////////////////////////여기부터 다시 절대 고정 건드리지마셈//////////////////////////////////// -->
<!-- 공통 하단 footer -->
<th:block th:replace="layout/fragments/footer.html :: footer"></th:block>
<!-- ////////////////////////////////////여기까지 다시 절대 고정 건드리지마셈//////////////////////////////////// -->

<!-- 얘들아 여기서부터 너네가 넣고 싶은 자바스크립트 코드 넣으면돼!!!!!! -->

<script>
/* 
    $(document).ready(function () {
        addComma();

        $(".btn-cancel").click(function (e) {
            e.preventDefault();

            let swalWithBootstrapButtons = Swal.mixin({
                confirmButtonText:"닫기",
                customClass: {
                    confirmButton: 'btn btn-success',
                    cancelButton: 'btn btn-danger'
                },
                buttonsStyling: false
            })

            Swal.fire({
                html: "승부 신청을 취소하시겠습니까?",
                icon: "warning",
                buttonsStyling: false,
                showCancelButton: true,
                confirmButtonText: "예",
                cancelButtonText: "아니오",
                customClass: {
                    confirmButton: "btn btn-primary",
                    cancelButton: 'btn btn-danger'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    // 예 클릭
                    swalWithBootstrapButtons.fire(
                        '취소되었습니다',
                        '',
                        'success'
                    )
                } else if (result.dismiss === Swal.DismissReason.cancel) {
                    // 아니오 클릭
                    console.log("취소클릭");
                }
            })
        
        
         */
        
         function fnDelRequestBattle(no){
            	
            	
            	var data = {"battleNo":no};
            	
            	$.ajax({
            		url: "/community/json/delRequestBattle", //url : 요청 Url
            		type: "POST", //type : 데이터를 전송하는 방법 (get, post)
            		dataType: "json", //서버측에서 전송받은 데이터의 형식 (default : xml, json, script, text, html) //=> default는 html
            		data: JSON.stringify(data), //요청과 함께 서버로 데이터를 전송 할 string 또는 map
            		contentType: "application/json",  // 서버에 보내는 데이터의 타입이다.
            		//async: false, //async: true <== default
            		success: function(data){ //  요청이 성공 했을 때 호출할 콜백 함수
            			console.log("성공" + data);
            			window.location.reload();
            			
            			
            		}
            		
            	});
            };
        

</script>

<!-- ////////////////////////////////////여기부터 다시 절대 고정 건드리지마셈//////////////////////////////////// -->
</body>
<!--end::Body-->
</html>